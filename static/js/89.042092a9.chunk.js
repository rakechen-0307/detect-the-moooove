(()=>{"use strict";var t={8089:(t,e,a)=>{var o=a(4382),n=a(464);var r=a(4382),s=a(464);const l=(t,e)=>{if(t=t.data?t.data:t,e=e.data?e.data:e,t.length!==e.length)throw new Error("x and y must have the same length");return t.map(((t,a)=>({x:t,y:e[a]})))},h=(t,e,a)=>{if(t=t.data?t.data:t,e=e.data?e.data:e,a=a.data?a.data:a,t.length>a.length||t.length>e.length)throw new Error("idx must have a length less than or equal to x and y");return t.map((t=>({x:e[t],y:a[t]})))},i=(t,e)=>{let a=t.length;if(e>=a)return t;let o=Math.floor(a/e),n=[];for(let r=0;r<a;r+=o)n.push(t[r]);return n};var p=a(4382),c=a(8559);const d=5e3;self.onmessage=function(t){const{loadedData:e,params:a}=t.data,u=e.map((t=>({x:t[1],y:t[2]})));let f=p(u.map((t=>t.x))),g=p(u.map((t=>t.y)));const v=((t,e)=>{void 0===t.shape&&(console.log("Warning: Data is not an ndarray"),t=o(t));const a=o(e,[e.length]);var r=o(new Float32Array(t.shape[0]),t.shape);return n(r,t,a),r})(g,a.bp_coef),m=l(f,v);let w=p(new Float32Array(v.shape[0]),v.shape);c.abs(w,v);const x=((t,e)=>{console.log(e),void 0===t.shape&&(console.log("Warning: Data is not an ndarray"),t=r(t));let a=6*e,o=r(new Float32Array(a+1),[a+1]);for(let r=-a/2;r<=a/2;r++){let t=Math.exp(-r*r/(2*e*e))/(Math.sqrt(2*Math.PI)*e);o.set(r+a/2,t)}console.log(o);let n=r(new Float32Array(t.shape[0]),t.shape);return s(n,t,o)})(w,a.smoothingStd),y=l(f,x),b=c.sum(x)/x.shape[0];let M=p(new Float32Array(x.shape[0]),x.shape);c.subs(M,x,b),c.maxs(M,M,0);const O=l(f,M);g=M.data,f=f.data;const{locations:k,level:F}=((t,e,a)=>{const o=t.reduce(((t,e)=>t+e),0)/t.length,n=Math.sqrt(t.map((t=>Math.pow(t-o,2))).reduce(((t,e)=>t+e),0)/t.length),r=o+n*e;let s=[],l=[];for(let i=0;i<t.length-1;i++)(t[i]<r&&t[i+1]>r||t[i]>r&&t[i+1]<r)&&l.push(i);let h=1;for(let i=0;i<l.length-1;i++){if(l[i]<=h)continue;let e=Array.from({length:l[i+1]-l[i]+1},((t,e)=>e+l[i])).map((e=>t[e])),o=Math.max(...e),n=e.indexOf(o)+l[i];if(o<=r)continue;for(let a=l[i]+1;a<l[i+1];a++)if(t[a]>=t[a-1]&&t[a]>=t[a+1]&&t[a]>=.5*t[n]+.5*r){o=t[a],n=a;break}let p=t.slice(0,n).reverse().findIndex((t=>t<=o*a)),c=t.slice(n).findIndex((t=>t<=o*a));p=-1!==p?n-p-1:0,c=-1!==c?n+c:t.length-1,h=n+(c-p),s.push([p,n,c])}return{locations:s,level:r}})(g,a.std,a.widthFactor);let j=[],D=[];for(let o=0;o<k.length;o++){let t=k[o][0],e=k[o][1],n=k[o][2];j.push({x:e*a.ts,y:g[e]}),D.push(h([t,e,n],f,g))}let{startLocations:P,endLocations:A}=((t,e,a,o)=>{t=t.data?t.data:t;let n=[],r=[];for(let s=0;s<e.length;s++){let a=e[s][0],l=e[s][1],h=e[s][2],i=t[a],p=t[l],c=(p-i)/(l-a),d=(t[h]-p)/(h-l);console.log(c),console.log(d);let u=Math.abs(c/d);Math.abs(d),u>o&&(n.push(l-p/c),r.push(l-p/d))}return{startLocations:n,endLocations:r}})(g,k,a.slopeThreshold,a.ratioThreshold);P=P.map((t=>t*a.ts)),A=A.map((t=>t*a.ts));const L=i(u,d),T=i(m,d),q=i(y,d),C=i(O,d);self.postMessage({downDataPoints:L,downFilteredDataPoint:T,downSmoothedDataPoint:q,downNormalizedDataPoint:C,peaks:j,slopes:D,level:F,startLocations:P,endLocations:A})}}},e={};function a(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={exports:{}};return t[o].call(r.exports,r,r.exports,a),r.exports}a.m=t,a.x=()=>{var t=a.O(void 0,[464],(()=>a(8089)));return t=a.O(t)},(()=>{var t=[];a.O=(e,o,n,r)=>{if(!o){var s=1/0;for(p=0;p<t.length;p++){o=t[p][0],n=t[p][1],r=t[p][2];for(var l=!0,h=0;h<o.length;h++)(!1&r||s>=r)&&Object.keys(a.O).every((t=>a.O[t](o[h])))?o.splice(h--,1):(l=!1,r<s&&(s=r));if(l){t.splice(p--,1);var i=n();void 0!==i&&(e=i)}}return e}r=r||0;for(var p=t.length;p>0&&t[p-1][2]>r;p--)t[p]=t[p-1];t[p]=[o,n,r]}})(),a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce(((e,o)=>(a.f[o](t,e),e)),[])),a.u=t=>"static/js/"+t+".a6679c6a.chunk.js",a.miniCssF=t=>{},a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),a.p="/detect-the-moooove/",(()=>{var t={89:1};a.f.i=(e,o)=>{t[e]||importScripts(a.p+a.u(e))};var e=self.webpackChunknasa_app=self.webpackChunknasa_app||[],o=e.push.bind(e);e.push=e=>{var n=e[0],r=e[1],s=e[2];for(var l in r)a.o(r,l)&&(a.m[l]=r[l]);for(s&&s(a);n.length;)t[n.pop()]=1;o(e)}})(),(()=>{var t=a.x;a.x=()=>a.e(464).then(t)})();a.x()})();
//# sourceMappingURL=89.042092a9.chunk.js.map